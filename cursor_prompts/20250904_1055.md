Create corner-case fixtures and an end-to-end spec. Also change `bin/run.rb` to honor ENV paths.

## 1) Fixtures (add exactly these files & contents)

**`spec/fixtures/input_corner_cases.txt`**
{"id":"2001","customer_id":"C1","load_amount":"$3,000.00","time":"2000-01-01T10:00:00Z"}
{"id":"2005","customer_id":"C1","load_amount":"$2,500.00","time":"2000-01-01T11:00:00Z"}
{"id":"2003","customer_id":"C2","load_amount":"$1,000.00","time":"2000-01-01T12:00:00Z"}
{"id":"2011","customer_id":"C3","load_amount":"$500.00","time":"2000-01-01T13:00:00Z"}
{"id":"2007","customer_id":"C1","load_amount":"$100.00","time":"2000-01-01T14:00:00Z"}
{"id":"2010","customer_id":"C1","load_amount":"$100.00","time":"2000-01-01T15:00:00Z"}
{"id":"2028","customer_id":"C1","load_amount":"$2,600.00","time":"2000-01-03T09:00:00Z"}
{"id":"2039","customer_id":"C2","load_amount":"$100.00","time":"2000-01-03T10:00:00Z"}
{"id":"2040","customer_id":"C1","load_amount":"$2,400.00","time":"2000-01-03T11:00:00Z"}
{"id":"2050","customer_id":"C3","load_amount":"$3,000.00","time":"2000-01-03T12:00:00Z"}
{"id":"2052","customer_id":"C3","load_amount":"$5,000.00","time":"2000-01-04T09:00:00Z"}
{"id":"97","customer_id":"C4","load_amount":"$10,500.00","time":"2000-01-04T10:00:00Z"}
{"id":"3000","customer_id":"C5","load_amount":"USD$1,234.56","time":"2000-01-04T11:00:00Z"}
{"id":"2054","customer_id":"C3","load_amount":"$5,000.00","time":"2000-01-05T09:00:00Z"}
{"id":"4000","customer_id":"C6","load_amount":"$4,000.00","time":"2000-01-05T23:59:59Z"}
{"id":"4001","customer_id":"C6","load_amount":"$4,000.00","time":"2000-01-06T00:00:00Z"}
{"id":"5000","customer_id":"C7","load_amount":"$10.00","time":"2000-01-06T08:00:00Z"}
{"id":"5001","customer_id":"C7","load_amount":"$10.00","time":"2000-01-06T08:10:00Z"}
{"id":"5002","customer_id":"C7","load_amount":"$10.00","time":"2000-01-06T08:20:00Z"}
{"id":"5003","customer_id":"C7","load_amount":"$10.00","time":"2000-01-06T08:30:00Z"}
{"id":"2056","customer_id":"C3","load_amount":"$4,000.00","time":"2000-01-06T09:00:00Z"}
{"id":"2058","customer_id":"C3","load_amount":"$1.00","time":"2000-01-07T09:00:00Z"}
{"id":"101","customer_id":"C8","load_amount":"$9,999.00","time":"2000-01-08T10:00:00Z"}
{"id":"103","customer_id":"C9","load_amount":"$1.00","time":"2000-01-08T11:00:00Z"}

**Rationale covered:**  
- Daily limit breach (C1 on 2000-01-01 at 11:00).  
- Daily count > 3 (C1 4th attempt same day 15:00).  
- Global prime-ID rule across clients (2000-01-01: id 2003 accepted, id 2011 declined).  
- Monday double-count (2000-01-03 id 2028 declined; id 2040 accepted).  
- Weekly limit crossing for C3 (Mon→Fri totals hit $20,000 effective; Fri extra $1 declined).  
- Prime-ID amount cap > $9,999 (id 97 declined).  
- Currency normalization with `USD$` prefix and comma (id 3000 accepted).  
- Day boundary 23:59:59 → 00:00:00 (C6 both accepted).  
- Prime-ID exactly $9,999 accepted; second prime same day declined (2000-01-08).

**`spec/fixtures/output_corner_cases.txt`**
{"id":"2001","customer_id":"C1","accepted":true}
{"id":"2005","customer_id":"C1","accepted":false}
{"id":"2003","customer_id":"C2","accepted":true}
{"id":"2011","customer_id":"C3","accepted":false}
{"id":"2007","customer_id":"C1","accepted":true}
{"id":"2010","customer_id":"C1","accepted":false}
{"id":"2028","customer_id":"C1","accepted":false}
{"id":"2039","customer_id":"C2","accepted":true}
{"id":"2040","customer_id":"C1","accepted":true}
{"id":"2050","customer_id":"C3","accepted":true}
{"id":"2052","customer_id":"C3","accepted":true}
{"id":"97","customer_id":"C4","accepted":false}
{"id":"3000","customer_id":"C5","accepted":true}
{"id":"2054","customer_id":"C3","accepted":true}
{"id":"4000","customer_id":"C6","accepted":true}
{"id":"4001","customer_id":"C6","accepted":true}
{"id":"5000","customer_id":"C7","accepted":true}
{"id":"5001","customer_id":"C7","accepted":true}
{"id":"5002","customer_id":"C7","accepted":true}
{"id":"5003","customer_id":"C7","accepted":false}
{"id":"2056","customer_id":"C3","accepted":true}
{"id":"2058","customer_id":"C3","accepted":false}
{"id":"101","customer_id":"C8","accepted":true}
{"id":"103","customer_id":"C9","accepted":false}

> These expected decisions assume:  
> - Limits are applied to **accepted** loads only.  
> - Monday loads count **double their value** toward daily/weekly limits.  
> - ISO week Mon–Sun.  
> - Prime-ID rule is **global per calendar day**: only the **first** prime-ID load with amount ≤ $9,999 may be accepted.

---

## 2) Switch `bin/run.rb` to use ENV paths

Modify `bin/run.rb` so path resolution is:
- `INPUT_PATH  = ENV.fetch("INPUT_PATH",  ARGV[0] || "input.txt")`
- `OUTPUT_PATH = ENV.fetch("OUTPUT_PATH", ARGV[1] || "output.txt")`

No other files created; keep all logic in `bin/run.rb`. Update README “Running the Script” with optional ENV usage:
```bash
INPUT_PATH=spec/fixtures/input_corner_cases.txt OUTPUT_PATH=tmp/output_corner_cases.txt ./bin/run.rb
3) End-to-end RSpec
Add spec/e2e/corner_cases_spec.rb that:

Runs bin/run.rb with the fixtures via ENV (not arguments).

Writes to a temp output file (tmp/output_corner_cases.txt).

Compares the entire file text to spec/fixtures/output_corner_cases.txt exactly (line-for-line).

Cleans up the temp file.

spec/e2e/corner_cases_spec.rb (exact content)

ruby
Copy code
require "fileutils"
require "open3"

RSpec.describe "End-to-end corner cases", :e2e do
  let(:root) { File.expand_path("../../..", __FILE__) }
  let(:bin)  { File.join(root, "bin", "run.rb") }
  let(:input_path)  { File.join(root, "spec", "fixtures", "input_corner_cases.txt") }
  let(:expect_path) { File.join(root, "spec", "fixtures", "output_corner_cases.txt") }
  let(:tmp_dir)     { File.join(root, "tmp") }
  let(:out_path)    { File.join(tmp_dir, "output_corner_cases.txt") }

  before { FileUtils.mkdir_p(tmp_dir) }
  after  { FileUtils.rm_f(out_path) }

  it "produces the expected output for the corner cases fixture" do
    cmd_env = { "INPUT_PATH" => input_path, "OUTPUT_PATH" => out_path }
    stdout, stderr, status = Open3.capture3(cmd_env, bin)

    # Our runner should write to OUTPUT_PATH and be quiet on STDOUT.
    expect(status.exitstatus).to eq(0), "run.rb failed: #{stderr}"
    expect(stdout).to eq("")

    actual  = File.read(out_path).strip
    expectd = File.read(expect_path).strip
    expect(actual).to eq(expectd)
  end
end
4) Verify
bundle exec rspec spec/e2e/corner_cases_spec.rb passes.

bundle exec rubocop passes.

README mentions optional ENV usage for input/output files.

5) Remember
Track this prompt in cursor_prompts/ as a separate .md file with a timestamped filename.